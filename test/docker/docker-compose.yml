version: '3'
services:
  mongo:
    image: mongo
    container_name: ast_mongo
  asterisk:
    image: ast_mongo-asterisk:15.1.3
    container_name: asterisk
    build:
      context: ../../
      dockerfile: Dockerfile
      args:
        VERSION_ASTERISK: 15.1.3
        VERSION_MONGOC: 1.8.2
    volumes:
      - ../volume/etc/asterisk:/etc/asterisk
      - ../volume/var/lib/asterisk/sounds/en:/var/lib/asterisk/sounds/en
  tester:
    image: ast_mongo-tester
    container_name: tester
    build:
      context: .
      dockerfile: Dockerfile
    env_file: tester.env
    volumes:
      - ../:/root/ast_mongo
